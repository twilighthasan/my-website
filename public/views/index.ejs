<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Текст в аудио</title>
</head>
<body>
  <textarea id="input" placeholder="Вставьте текст здесь"></textarea>
  <button id="playButton">Воспроизвести</button>
  <button id="saveButton">Сохранить аудио</button>
  
  <script>
    const playButton = document.getElementById("playButton");
    const saveButton = document.getElementById("saveButton");
    const input = document.getElementById("input");

    playButton.addEventListener("click", async () => {
      const text = input.value;
      if (text.trim().length === 0) {
        alert("Пожалуйста, введите текст для конвертации");
        return;
      }
      const audio = new Audio(`/audio?text=${encodeURIComponent(text)}`);
      audio.play();
    });

    saveButton.addEventListener("click", () => {
  const text = input.value;
  if (text.trim().length === 0) {
    alert("Пожалуйста, введите текст для конвертации");
    return;
  }
  const link = document.createElement("a");
  link.href = `/audio?text=${encodeURIComponent(text)}`;
  link.download = "audio.mp3";
  link.style.display = "none";
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
});

  </script>
</body>
</html>
